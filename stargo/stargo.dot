digraph stargo {
    rankdir=BT

    graph [fontname = "Inconsolata"];
    node [fontname = "Inconsolata"];
    edge [fontname = "Inconsolata"];

    node [
        shape = "record"
        style = "filled"
        fillcolor = "lightpink"
    ]

    IQueue [
        label = "{\<\<interface\>\>\nIQueue||+Push(T)\l+Pop(): T\l+Empty(): bool\l+Size(): int\l}"
    ]

    ISet [
        label = "{\<\<interface\>\>\nISet||+Insert(T)\l+Remove(T)\l+Has(T): bool\l+Empty(): bool\l+Size(): int\l}"
    ]

    ITask [
        label = "{\<\<interface\>\>\nITask||+Process(): (T, error)\l+State(): T\l+AddParent(ITask)\l+ParentSize(): int\l}"
    ]

    IDag [
        label = "{\<\<interface\>\>\nIDag||+AddTask(ITask)\l+AddEdge(ITask, ITask)\l+GetReadyTask(): ITask\l+State(): T\l}"
    ]

    IPool [
        label = "{\<\<interface\>\>\nIPool||+Init(int)\l+Bind(IDag)\l+Process()\l}"
    ]

    node [
        fillcolor = "skyblue"
    ]

    Queue [
        label = "{Queue|-items: []T\l-mutex: sync.Mutex\l|}"
    ]

    Set [
        label = "{Set|-mp: map[T]bool\l-mutex: sync.Mutex\l|}"
    ]

    Task [
        label = "{Task|+Func: F\l+Args: T\l+Parents: ISet\l-state: TaskState\l|}"
    ]

    Dag [
        label = "{Dag|-notReadyTaskQueue: IQueue\l-readyTaskQueue: IQueue\l-state: DagState\l-stateMutex: sync.Mutex\l-nAll: int\l-nDone: int\l|-lock()\l-update()\l}"
    ]

    Pool [
        label = "{Pool|-dag: IDag\l|}"
    ]

    node [
        fillcolor = "palegreen"
    ]

    TaskState [
        label = "{\<\<enum\>\>\nTaskState\n|TASK_NOTDONE\lTASK_DONE\lTASK_WRONG\l}"
    ]

    DagState [
        label = "{\<\<enum\>\>\nDagState\n|DAG_INIT\lDAG_UPDATING\lDAG_NOTDONE\lDAG_DONE\l}"
    ]

    node [
        shape = "note"
        fillcolor = "gray"
    ]

    note01 [
        label = "language: Golang\l\lSymbols:\l+: public\l-: package\lT: interface{}\lF: func(T) T\l"
    ]


    edge [
        style=dashed 
        arrowhead=empty
    ]

    Queue -> IQueue
    Set -> ISet
    Task -> ITask 
    Dag -> IDag 
    Pool -> IPool

    edge [
        style=solid
        arrowhead=vee
    ]

    Task -> ISet
    Task -> TaskState
    Dag -> IQueue
    Dag -> DagState
    IPool -> IDag 

    edge [
        style=solid
        arrowhead=odiamond
    ]

    ITask -> IDag


}